<!DOCTYPE html>
<html>

<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.js"></script>

</head>

<body>

  <script>
navigator.mediaDevices.getUserMedia({video: true})
  .then(stream => {
    // ユーザーがメディアへのアクセスを許可した後、enumerateDevices()を再度実行します
    navigator.mediaDevices.enumerateDevices()
      .then(devices => {
        devices.forEach(device => {
          console.log(device.kind + ": " + device.label +
                      " id = " + device.deviceId);
        });
      })
      .catch(err => {
        console.log(err.name + ": " + err.message);
      });
    
    // 不要になったストリームを停止します
    stream.getTracks().forEach(track => track.stop());
  })
  .catch(err => {
    console.log(err.name + ": " + err.message);
  });
  </script>

</body>

</html>
